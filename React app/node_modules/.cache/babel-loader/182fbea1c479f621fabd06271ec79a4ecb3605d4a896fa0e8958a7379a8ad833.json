{"ast":null,"code":"import React,{useState,useEffect}from'react';import Sidebar from'./sidebar.jsx';import Main from'./main.jsx';import AddPage from'./addPage.jsx';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const[authenticated,setAuthenticated]=useState(false);const[user,setUser]=useState(null);const[loading,setLoading]=useState(true);const[selectedFriend,setSelectedFriend]=useState(null);const[showMain,setShowmain]=useState(true);useEffect(()=>{const checkAuthStatus=async()=>{try{const response=await fetch('/auth-status',{method:'GET',credentials:'include'});const data=await response.json();setAuthenticated(data.authenticated);if(data.authenticated){setLoading(false);setUser(data.user);}}catch(error){console.error('Error checking auth status:',error);}};checkAuthStatus();},[]);const handleAddFriend=async friendName=>{try{const response=await fetch('/api/addFriend',{method:'POST',headers:{'Content-Type':'application/json'},credentials:'include',body:JSON.stringify({friendName:friendName})});const data=await response.json();if(response.ok){console.log(\"Friend added successfully\",data);setShowmain(true);}else{console.error('Error adding friend:',data.error);}}catch(error){console.error('Error adding friend:',error);}};if(loading)return/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});if(!authenticated)return/*#__PURE__*/_jsx(\"div\",{children:\"Please log in...\"});return/*#__PURE__*/_jsxs(\"div\",{className:\"app-container\",children:[/*#__PURE__*/_jsx(Sidebar,{user:user,setSelectedFriend:setSelectedFriend,setShowmain:setShowmain}),showMain?/*#__PURE__*/_jsx(Main,{user:user,selectedFriend:selectedFriend}):/*#__PURE__*/_jsx(AddPage,{handleAddFriend:handleAddFriend})]});}export default App;","map":{"version":3,"names":["React","useState","useEffect","Sidebar","Main","AddPage","jsx","_jsx","jsxs","_jsxs","App","authenticated","setAuthenticated","user","setUser","loading","setLoading","selectedFriend","setSelectedFriend","showMain","setShowmain","checkAuthStatus","response","fetch","method","credentials","data","json","error","console","handleAddFriend","friendName","headers","body","JSON","stringify","ok","log","children","className"],"sources":["C:/Users/Aniket Sahu/Desktop/Projects/Messaging site/React app/src/components/App.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport Sidebar from './sidebar.jsx';\r\nimport Main from './main.jsx';\r\nimport AddPage from './addPage.jsx';\r\n\r\nfunction App() {\r\n    const [authenticated, setAuthenticated] = useState(false);\r\n    const [user, setUser] = useState(null);\r\n    const [loading, setLoading] = useState(true); \r\n    const [selectedFriend, setSelectedFriend] = useState(null);\r\n    const [showMain, setShowmain] = useState(true);  \r\n\r\n    useEffect(() => {\r\n        const checkAuthStatus = async () => {\r\n            try {\r\n                const response = await fetch('/auth-status', {\r\n                    method: 'GET',\r\n                    credentials: 'include',\r\n                });\r\n                const data = await response.json();\r\n                setAuthenticated(data.authenticated);\r\n                if (data.authenticated) {\r\n                    setLoading(false);\r\n                    setUser(data.user);\r\n                }\r\n            } catch (error) {\r\n                console.error('Error checking auth status:', error);\r\n            }\r\n        };\r\n        checkAuthStatus();\r\n    }, []);\r\n\r\n    const handleAddFriend = async (friendName) => {\r\n        try {\r\n            const response = await fetch('/api/addFriend', {\r\n                method: 'POST',\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                },\r\n                credentials: 'include',\r\n                body: JSON.stringify({friendName: friendName}),\r\n            });\r\n            const data = await response.json();\r\n            if (response.ok) {\r\n                console.log(\"Friend added successfully\", data);\r\n                setShowmain(true); \r\n            } else {\r\n                console.error('Error adding friend:', data.error);\r\n            }\r\n        } catch (error) {\r\n            console.error('Error adding friend:', error);\r\n        }\r\n    };\r\n    \r\n    if (loading) return <div>Loading...</div>;\r\n\r\n    if (!authenticated) return <div>Please log in...</div>;\r\n\r\n    return (\r\n        <div className=\"app-container\">\r\n            <Sidebar user={user} setSelectedFriend={setSelectedFriend} setShowmain={setShowmain} />\r\n            \r\n            {showMain ? (\r\n                <Main user={user} selectedFriend={selectedFriend} />\r\n            ) : (\r\n                <AddPage handleAddFriend={handleAddFriend}/>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default App;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}