{"ast":null,"code":"import React,{useState,useEffect}from'react';import Sidebar from'./sidebar';import Main from'./main';import AddPage from'./addPage';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const App=()=>{const[authenticated,setAuthenticated]=useState<boolean>false;const[user,setUser]=useState<User|null>null;const[loading,setLoading]=useState<boolean>true;const[selectedFriend,setSelectedFriend]=useState<User|null>null;const[showMain,setShowmain]=useState<boolean>true;useEffect(()=>{const checkAuthStatus=async()=>{try{const response=await fetch('/auth-status',{method:'GET',credentials:'include'});const data=await response.json();setAuthenticated(data.authenticated);if(data.authenticated){setLoading(false);setUser(data.user);}}catch(error){console.error('Error checking auth status:',error);setLoading(false);}};checkAuthStatus();},[]);const handleAddFriend=async friendName=>{try{const response=await fetch('/api/addFriend',{method:'POST',headers:{'Content-Type':'application/json'},credentials:'include',body:JSON.stringify({friendName:friendName})});const data=await response.json();if(response.ok){console.log(\"Friend added successfully\",data);setShowmain(true);}else{console.error('Error adding friend:',data.error);}}catch(error){console.error('Error adding friend:',error);}};if(loading)return/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});if(!authenticated)return/*#__PURE__*/_jsx(\"div\",{children:\"Please log in...\"});return/*#__PURE__*/_jsxs(\"div\",{className:\"app-container\",children:[/*#__PURE__*/_jsx(Sidebar,{user:user,setSelectedFriend:setSelectedFriend,setShowmain:setShowmain}),showMain?user?/*#__PURE__*/_jsx(Main,{user:user,selectedFriend:selectedFriend,setAuthenticated:setAuthenticated}):/*#__PURE__*/_jsx(\"div\",{children:\"No user found. Please log in.\"}):/*#__PURE__*/_jsx(AddPage,{handleAddFriend:handleAddFriend})]});};export default App;","map":{"version":3,"names":["React","useState","useEffect","Sidebar","Main","AddPage","jsx","_jsx","jsxs","_jsxs","App","authenticated","setAuthenticated","boolean","user","setUser","User","loading","setLoading","selectedFriend","setSelectedFriend","showMain","setShowmain","checkAuthStatus","response","fetch","method","credentials","data","json","error","console","handleAddFriend","friendName","headers","body","JSON","stringify","ok","log","children","className"],"sources":["C:/Users/Aniket Sahu/Desktop/Projects/Messaging site/React app/src/components/App.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport Sidebar from './sidebar';\r\nimport Main from './main';\r\nimport AddPage from './addPage';\r\n  \r\ninterface friends {\r\n    user_id: number;\r\n    friend_user_id: number;\r\n}\r\n\r\ninterface User {\r\n    user_id: number;\r\n    username: string;\r\n} \r\n\r\ninterface AuthStatus {\r\n    authenticated: boolean;\r\n    user: User;\r\n}  \r\n\r\ninterface addFriendResponse{\r\n    error?: string;\r\n    friend?: friends;\r\n}\r\n\r\nconst App: React.FC = () =>{\r\n    const [authenticated, setAuthenticated] = useState<boolean>(false);\r\n    const [user, setUser] = useState<User | null>(null);\r\n    const [loading, setLoading] = useState<boolean>(true); \r\n    const [selectedFriend, setSelectedFriend] = useState<User | null>(null);\r\n    const [showMain, setShowmain] = useState<boolean>(true);  \r\n\r\n    useEffect(() => {\r\n        const checkAuthStatus = async () => {\r\n            try {\r\n                const response = await fetch('/auth-status', {\r\n                    method: 'GET',\r\n                    credentials: 'include',\r\n                });\r\n                const data: AuthStatus = await response.json();\r\n                setAuthenticated(data.authenticated);\r\n                if (data.authenticated) {\r\n                    setLoading(false);\r\n                    setUser(data.user);\r\n                }\r\n            } catch (error) {\r\n                console.error('Error checking auth status:', error);    \r\n                setLoading(false); \r\n            }\r\n        };\r\n        checkAuthStatus();\r\n    }, []);\r\n\r\n    const handleAddFriend = async (friendName: string) => {\r\n        try {\r\n            const response = await fetch('/api/addFriend', {\r\n                method: 'POST',\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                },\r\n                credentials: 'include',\r\n                body: JSON.stringify({friendName: friendName}),\r\n            });\r\n            const data: addFriendResponse = await response.json();\r\n            if (response.ok) {\r\n                console.log(\"Friend added successfully\", data);\r\n                setShowmain(true); \r\n            } else {\r\n                console.error('Error adding friend:', data.error);\r\n            }\r\n        } catch (error) {\r\n            console.error('Error adding friend:', error);\r\n        }\r\n    };\r\n    \r\n    if (loading) return <div>Loading...</div>;\r\n\r\n    if (!authenticated) return <div>Please log in...</div>;\r\n\r\n    return (\r\n        <div className=\"app-container\">\r\n            <Sidebar user={user} setSelectedFriend={setSelectedFriend} setShowmain={setShowmain} />\r\n            {showMain ? (\r\n                user ? ( \r\n                    <Main \r\n                        user={user} \r\n                        selectedFriend={selectedFriend} \r\n                        setAuthenticated={setAuthenticated}\r\n                    />\r\n                ) : (\r\n                    <div>No user found. Please log in.</div> \r\n                )\r\n            ) : (\r\n                <AddPage handleAddFriend={handleAddFriend}/>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default App;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}