{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import{useNavigate}from\"react-router-dom\";import FriendDetails from\"./friendDetails\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Main=_ref=>{let{user,selectedFriend,setAuthenticated,friendReqs}=_ref;const navigate=useNavigate();const[messages,setMessages]=useState([]);const[newMessage,setNewMessage]=useState(\"\");const[showMenu,setShowMenu]=useState(null);const[showFriendDetails,setShowFriendDetails]=useState(false);const[editedMessage,setEditedMessage]=useState(\"\");const[showFriendReqs,setShowFriendReqs]=useState(false);const[editing,setEditing]=useState({isEditing:false,index:null});const handleMenuToggle=index=>{setShowMenu(showMenu===index?null:index);};const handleDelete=async messageId=>{console.log(user.user_id);try{const response=await fetch(`/api/messages/${messageId}`,{method:\"DELETE\",credentials:\"include\"});if(response.ok){setMessages(prevMessages=>prevMessages.filter(message=>message.message_id!==messageId));}else{console.error(\"Failed to delete message:\",await response.json());}}catch(error){console.error(\"Error fetching messages:\",error);}};const handleEdit=async()=>{if(editing.index===null)return;try{const messageId=messages[editing.index].message_id;const response=await fetch(`/api/messages/${messageId}`,{method:\"PATCH\",headers:{\"Content-Type\":\"application/json\"},credentials:\"include\",body:JSON.stringify({editedMessage})});if(response.ok){const updatedMessage=await response.json();setMessages(prevMessages=>prevMessages.map(msg=>msg.message_id===messageId?updatedMessage:msg));setNewMessage(\"\");setEditing({isEditing:false,index:null});setEditedMessage(\"\");}}catch(error){console.error(\"Error sending message\",error);}};useEffect(()=>{if(selectedFriend){fetchMessages();setShowFriendDetails(false);}},[selectedFriend]);const detailsManage=async()=>{setShowFriendDetails(!showFriendDetails);};const fetchMessages=async()=>{if(!selectedFriend)return;try{const response=await fetch(`/api/messages?friend_id=${selectedFriend.user_id}`,{method:\"GET\",credentials:\"include\"});const data=await response.json();const sortedMessages=data.messages.sort((a,b)=>new Date(a.time).getTime()-new Date(b.time).getTime());setMessages(sortedMessages);}catch(error){console.error(\"Error fetching messages:\",error);}};const messageSent=async message=>{if(!selectedFriend){alert(\"Please select a friend to send a message.\");return;}try{const response=await fetch(\"/api/sendMessage\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},credentials:\"include\",body:JSON.stringify({message,friend_id:selectedFriend.user_id})});const data=await response.json();if(response.ok){setMessages(prevMessages=>[...prevMessages,data]);setNewMessage(\"\");}}catch(error){console.error(\"Error sending message\",error);}};const handleSendMessage=e=>{e.preventDefault();if(newMessage.trim()){messageSent(newMessage);}};const handleLogout=async()=>{try{const response=await fetch(\"/logout\",{method:\"GET\",credentials:\"include\"});if(response.ok){const data=await response.json();setAuthenticated(false);navigate(data);}else{const errorData=await response.json();console.error(\"Logout failed:\",errorData.message);}}catch(error){console.error(\"Error during logout:\",error);}};const toggleDropdown=async()=>{setShowFriendReqs(!showFriendReqs);};const acceptReq=async id=>{if(id===undefined){console.warn(\"The friend req is invalid\");}setShowFriendReqs(false);try{const response=await fetch(`/api/acceptRequest/${id}`,{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},credentials:\"include\"});}catch(error){console.error(\"Error accepting friend request\",error);}};const rejectReq=async id=>{if(id===undefined){console.warn(\"The friend req is invalid\");}setShowFriendReqs(false);try{const response=await fetch(`/api/rejectRequest/${id}`,{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},credentials:\"include\"});}catch(error){console.error(\"Error rejecting friend request\",error);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"main-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"main-header\",children:[selectedFriend?/*#__PURE__*/_jsx(\"span\",{onClick:()=>detailsManage(),children:selectedFriend.username}):/*#__PURE__*/_jsx(\"span\",{children:\"Select a friend\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"friend-requests-container\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:toggleDropdown,children:\"Friend Requests\"}),showFriendReqs&&/*#__PURE__*/_jsx(\"div\",{className:\"dropdown-menu\",children:friendReqs.length>0?friendReqs.map(req=>/*#__PURE__*/_jsxs(\"div\",{className:\"dropdown-item\",children:[/*#__PURE__*/_jsx(\"p\",{children:`${req.username} sent you a Friend Request`}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>acceptReq(req.req_id),children:\"Accept\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>rejectReq(req.req_id),children:\"Reject\"})]},req.req_id)):/*#__PURE__*/_jsx(\"p\",{children:\"No friend requests\"})})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleLogout,children:\"Logout\"})]}),showFriendDetails&&selectedFriend&&/*#__PURE__*/_jsx(FriendDetails,{friendId:selectedFriend.user_id}),/*#__PURE__*/_jsx(\"div\",{className:\"main-messages\",children:messages.length>0?messages.map((msg,index)=>/*#__PURE__*/_jsxs(\"div\",{className:msg.user_id===user.user_id?\"friend-message\":\"user-message\",children:[/*#__PURE__*/_jsx(\"span\",{children:msg.message}),/*#__PURE__*/_jsx(\"div\",{className:\"menu-dots\",onClick:()=>handleMenuToggle(index),children:\"\\u22EE\"}),showMenu===index&&/*#__PURE__*/_jsxs(\"div\",{className:\"dropdown-menu\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setEditing({isEditing:true,index});setEditedMessage(msg.message);setShowMenu(null);},children:\"Edit\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDelete(msg.message_id),children:\"Delete\"})]})]},index)):/*#__PURE__*/_jsx(\"div\",{children:\"You are so lonely\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"main-input\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:e=>{e.preventDefault();if(editing.isEditing){handleEdit();}else{handleSendMessage(e);}},children:[/*#__PURE__*/_jsx(\"input\",{id:\"message-input\",name:\"message\",type:\"text\",placeholder:\"Type your message...\",value:editing.isEditing?editedMessage:newMessage,onChange:e=>{if(editing.isEditing){setEditedMessage(e.target.value);}else{setNewMessage(e.target.value);}}}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:editing.isEditing?\"Save\":\"Send\"})]})})]});};export default Main;","map":{"version":3,"names":["React","useEffect","useState","useNavigate","FriendDetails","jsx","_jsx","jsxs","_jsxs","Main","_ref","user","selectedFriend","setAuthenticated","friendReqs","navigate","messages","setMessages","newMessage","setNewMessage","showMenu","setShowMenu","showFriendDetails","setShowFriendDetails","editedMessage","setEditedMessage","showFriendReqs","setShowFriendReqs","editing","setEditing","isEditing","index","handleMenuToggle","handleDelete","messageId","console","log","user_id","response","fetch","method","credentials","ok","prevMessages","filter","message","message_id","error","json","handleEdit","headers","body","JSON","stringify","updatedMessage","map","msg","fetchMessages","detailsManage","data","sortedMessages","sort","a","b","Date","time","getTime","messageSent","alert","friend_id","handleSendMessage","e","preventDefault","trim","handleLogout","errorData","toggleDropdown","acceptReq","id","undefined","warn","rejectReq","className","children","onClick","username","length","req","req_id","friendId","onSubmit","name","type","placeholder","value","onChange","target"],"sources":["C:/Users/Aniket Sahu/Desktop/Projects/Messaging site/React app/src/components/main.tsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport FriendDetails from \"./friendDetails\";\r\n\r\ninterface User {\r\n  user_id: number;\r\n  username: string;\r\n  bio?: string;\r\n  UID: number;\r\n}\r\n\r\ninterface mainProps {\r\n  user: User;\r\n  selectedFriend: User | null;\r\n  setAuthenticated: (value: boolean) => void;\r\n  friendReqs: friendReq[];\r\n}\r\n\r\ninterface friendReq {\r\n  req_id?: number;\r\n  username: string;\r\n  user_id: number;\r\n  friend_id: number;\r\n  status: \"pending\" | \"accepted\" | \"rejected\";\r\n  timestamp: Date;\r\n}\r\n\r\ninterface Message {\r\n  message_id?: number;\r\n  user_id: number;\r\n  friend_id: number;\r\n  time: Date;\r\n  message: string;\r\n}\r\n\r\nconst Main: React.FC<mainProps> = ({\r\n  user,\r\n  selectedFriend,\r\n  setAuthenticated,\r\n  friendReqs,\r\n}) => {\r\n  const navigate = useNavigate();\r\n  const [messages, setMessages] = useState<Message[]>([]);\r\n  const [newMessage, setNewMessage] = useState<string>(\"\");\r\n  const [showMenu, setShowMenu] = useState<number | null>(null);\r\n  const [showFriendDetails, setShowFriendDetails] = useState<boolean>(false);\r\n  const [editedMessage, setEditedMessage] = useState<string>(\"\");\r\n  const [showFriendReqs, setShowFriendReqs] = useState<boolean>(false);\r\n  const [editing, setEditing] = useState<{\r\n    isEditing: boolean;\r\n    index: number | null;\r\n  }>({ isEditing: false, index: null });\r\n\r\n  const handleMenuToggle = (index: number): void => {\r\n    setShowMenu(showMenu === index ? null : index);\r\n  };\r\n\r\n  const handleDelete = async (messageId: number): Promise<void> => {\r\n    console.log(user.user_id);\r\n    try {\r\n      const response = await fetch(`/api/messages/${messageId}`, {\r\n        method: \"DELETE\",\r\n        credentials: \"include\",\r\n      });\r\n      if (response.ok) {\r\n        setMessages((prevMessages) =>\r\n          prevMessages.filter((message) => message.message_id !== messageId)\r\n        );\r\n      } else {\r\n        console.error(\"Failed to delete message:\", await response.json());\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error fetching messages:\", error);\r\n    }\r\n  };\r\n\r\n  const handleEdit = async (): Promise<void> => {\r\n    if (editing.index === null) return;\r\n\r\n    try {\r\n      const messageId = messages[editing.index].message_id;\r\n      const response = await fetch(`/api/messages/${messageId}`, {\r\n        method: \"PATCH\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        credentials: \"include\",\r\n        body: JSON.stringify({\r\n          editedMessage,\r\n        }),\r\n      });\r\n      if (response.ok) {\r\n        const updatedMessage: Message = await response.json();\r\n        setMessages((prevMessages) =>\r\n          prevMessages.map((msg) =>\r\n            msg.message_id === messageId ? updatedMessage : msg\r\n          )\r\n        );\r\n        setNewMessage(\"\");\r\n        setEditing({ isEditing: false, index: null });\r\n        setEditedMessage(\"\");\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error sending message\", error);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (selectedFriend) {\r\n      fetchMessages();\r\n      setShowFriendDetails(false);\r\n    }\r\n  }, [selectedFriend]);\r\n\r\n  const detailsManage = async () => {\r\n    setShowFriendDetails(!showFriendDetails);\r\n  };\r\n\r\n  const fetchMessages = async () => {\r\n    if (!selectedFriend) return;\r\n\r\n    try {\r\n      const response = await fetch(\r\n        `/api/messages?friend_id=${selectedFriend.user_id}`,\r\n        {\r\n          method: \"GET\",\r\n          credentials: \"include\",\r\n        }\r\n      );\r\n      const data = await response.json();\r\n      const sortedMessages = data.messages.sort(\r\n        (a: Message, b: Message) =>\r\n          new Date(a.time).getTime() - new Date(b.time).getTime()\r\n      );\r\n      setMessages(sortedMessages);\r\n    } catch (error) {\r\n      console.error(\"Error fetching messages:\", error);\r\n    }\r\n  };\r\n\r\n  const messageSent = async (message: string) => {\r\n    if (!selectedFriend) {\r\n      alert(\"Please select a friend to send a message.\");\r\n      return;\r\n    }\r\n    try {\r\n      const response = await fetch(\"/api/sendMessage\", {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        credentials: \"include\",\r\n        body: JSON.stringify({\r\n          message,\r\n          friend_id: selectedFriend.user_id,\r\n        }),\r\n      });\r\n      const data = await response.json();\r\n\r\n      if (response.ok) {\r\n        setMessages((prevMessages) => [...prevMessages, data]);\r\n        setNewMessage(\"\");\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error sending message\", error);\r\n    }\r\n  };\r\n\r\n  const handleSendMessage = (e: React.FormEvent<HTMLFormElement>) => {\r\n    e.preventDefault();\r\n    if (newMessage.trim()) {\r\n      messageSent(newMessage);\r\n    }\r\n  };\r\n\r\n  const handleLogout = async () => {\r\n    try {\r\n      const response = await fetch(\"/logout\", {\r\n        method: \"GET\",\r\n        credentials: \"include\",\r\n      });\r\n\r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        setAuthenticated(false);\r\n        navigate(data);\r\n      } else {\r\n        const errorData = await response.json();\r\n        console.error(\"Logout failed:\", errorData.message);\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error during logout:\", error);\r\n    }\r\n  };\r\n\r\n  const toggleDropdown = async () => {\r\n    setShowFriendReqs(!showFriendReqs);\r\n  };\r\n\r\n  const acceptReq = async (id: number | undefined) => {\r\n    if (id === undefined) {\r\n      console.warn(\"The friend req is invalid\");\r\n    }\r\n    setShowFriendReqs(false);\r\n    try {\r\n      const response = await fetch(`/api/acceptRequest/${id}`, {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        credentials: \"include\",\r\n      });\r\n\r\n    } catch (error) {\r\n      console.error(\"Error accepting friend request\", error);\r\n    }\r\n  };\r\n\r\n  const rejectReq = async (id: number | undefined) => {\r\n    if (id === undefined) {\r\n      console.warn(\"The friend req is invalid\");\r\n    }\r\n    setShowFriendReqs(false);\r\n    try {\r\n      const response = await fetch(`/api/rejectRequest/${id}`, {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        credentials: \"include\",\r\n      });\r\n\r\n    } catch (error) {\r\n      console.error(\"Error rejecting friend request\", error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"main-container\">\r\n      <div className=\"main-header\">\r\n        {selectedFriend ? (\r\n          <span onClick={() => detailsManage()}>{selectedFriend.username}</span>\r\n        ) : (\r\n          <span>Select a friend</span>\r\n        )}\r\n        <div className=\"friend-requests-container\">\r\n          <button onClick={toggleDropdown}>Friend Requests</button>\r\n          {showFriendReqs && (\r\n            <div className=\"dropdown-menu\">\r\n              {friendReqs.length > 0 ? (\r\n                friendReqs.map((req) => (\r\n                  <div key={req.req_id} className=\"dropdown-item\">\r\n                    <p>{`${req.username} sent you a Friend Request`}</p>\r\n                    <button onClick={() => acceptReq(req.req_id)}>\r\n                      Accept\r\n                    </button>\r\n                    <button onClick={() => rejectReq(req.req_id)}>\r\n                      Reject\r\n                    </button>\r\n                  </div>\r\n                ))\r\n              ) : (\r\n                <p>No friend requests</p>\r\n              )}\r\n            </div>\r\n          )}\r\n        </div>\r\n        <button onClick={handleLogout}>Logout</button>\r\n      </div>\r\n      {showFriendDetails && selectedFriend && (\r\n        <FriendDetails friendId={selectedFriend.user_id} />\r\n      )}\r\n      <div className=\"main-messages\">\r\n        {messages.length > 0 ? (\r\n          messages.map((msg, index) => (\r\n            <div\r\n              key={index}\r\n              className={\r\n                msg.user_id === user.user_id ? \"friend-message\" : \"user-message\"\r\n              }\r\n            >\r\n              <span>{msg.message}</span>\r\n\r\n              <div\r\n                className=\"menu-dots\"\r\n                onClick={() => handleMenuToggle(index)}\r\n              >\r\n                &#x22EE;\r\n              </div>\r\n\r\n              {showMenu === index && (\r\n                <div className=\"dropdown-menu\">\r\n                  <button\r\n                    onClick={() => {\r\n                      setEditing({ isEditing: true, index });\r\n                      setEditedMessage(msg.message);\r\n                      setShowMenu(null);\r\n                    }}\r\n                  >\r\n                    Edit\r\n                  </button>\r\n                  <button onClick={() => handleDelete(msg.message_id!)}>\r\n                    Delete\r\n                  </button>\r\n                </div>\r\n              )}\r\n            </div>\r\n          ))\r\n        ) : (\r\n          <div>You are so lonely</div>\r\n        )}\r\n      </div>\r\n      <div className=\"main-input\">\r\n        <form\r\n          onSubmit={(e) => {\r\n            e.preventDefault();\r\n            if (editing.isEditing) {\r\n              handleEdit();\r\n            } else {\r\n              handleSendMessage(e);\r\n            }\r\n          }}\r\n        >\r\n          <input\r\n            id=\"message-input\"\r\n            name=\"message\"\r\n            type=\"text\"\r\n            placeholder=\"Type your message...\"\r\n            value={editing.isEditing ? editedMessage : newMessage}\r\n            onChange={(e) => {\r\n              if (editing.isEditing) {\r\n                setEditedMessage(e.target.value);\r\n              } else {\r\n                setNewMessage(e.target.value);\r\n              }\r\n            }}\r\n          />\r\n          <button type=\"submit\">{editing.isEditing ? \"Save\" : \"Send\"}</button>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Main;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}